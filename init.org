* Introduction
** æ¦‚è¦

tkancfã®Emacsã®configãƒ•ã‚¡ã‚¤ãƒ«\\
orgãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰è¨­å®šã‚’ç”Ÿæˆã™ã‚‹ã€‚

- Repository
  - https://github.com/tkancf/tkancf.com
- blog
  - https://tkancf.com

** åˆ©ç”¨æ–¹æ³•

~make build~ ã™ã‚‹ã¨ ~init.org~ ã‹ã‚‰ ~init.el~ ãŒç”Ÿæˆã•ã‚Œã¦ã€ ~init.el~ ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€‚\\
éƒ¨åˆ†çš„ã«orgãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°ã—ãŸã¨ãã¯ã€ ~C-c C-c~ ã§ä¸€éƒ¨å®Ÿè¡Œå¯èƒ½ã€‚

** å…¨ä½“ã®ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

- init.org
  - æ›´æ–°ã™ã‚‹éš›ã¯åŸºæœ¬çš„ã«ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°ã™ã‚‹
- snippets/
  - yasnippetã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§åˆ©ç”¨ã™ã‚‹ã‚¹ãƒ‹ãƒšãƒƒãƒˆã®ç®¡ç†ç”¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

** è¨­å®šæ–¹é‡

- ãƒ†ã‚­ã‚¹ãƒˆç·¨é›†ã¯evil-modeã«é ¼ã‚‹
  - Vimmerãªã®ã§ã€Vim likeã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ãŒãªã„ã¨ç„¡åŠ›
  - evil-modeã§Vimã‚’å†ç¾ã—ã‚ˆã†ã¨ã¯ã—ãªã„
- GUIã®Emacsåˆ©ç”¨ã®ã¿ã‚’æƒ³å®šã™ã‚‹
  - superã‚­ãƒ¼ã‚’å¤šæ§˜ã™ã‚‹
- ãªã‚‹ã¹ãå·¦æ‰‹å°æŒ‡ã®è² æ‹…ã‚’æ¸›ã‚‰ã™

* Header

æ„å‘³ã¯ã‚ˆãã‚ã‹ã£ã¦ãªã„ãŒã€ã‚ˆãæ›¸ã„ã¦ã‚‹ã®ã‚’è¦‹ã‹ã‘ã‚‹ã®ã§ä¸€å¿œæ›¸ã„ã¦ãŠãã€‚

#+BEGIN_SRC emacs-lisp :results none
  ;; init.el --- My init.el -*- lexical-binding: t -*-
  ;; Configurations for Emacs
#+END_SRC

* Basic
** ä½™è¨ˆãªæƒ…å ±ã‚’è¡¨ç¤ºã—ãªã„

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ã€GUIä¸Šã«ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ (Emacsã®å³ä¸Šã«å‡ºã¦ãã‚‹ä¿å­˜ã¨ã‹ã®ã‚¢ã‚¤ã‚³ãƒ³)ãŒå‡ºã¦ãã‚‹ã€‚\\
ä¸è¦ãªã®ã§ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã¯å‰Šé™¤

#+BEGIN_SRC emacs-lisp :results none
  (push '(tool-bar-lines . 0) default-frame-alist)
#+END_SRC

** ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸éè¡¨ç¤º

ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ã«ã‚¢ã‚¤ã‚³ãƒ³ã¨ã‹åˆ¥ã«ã„ã‚‰ãªã„ã®ã§å‰Šé™¤\\
èµ·å‹•æ™‚ã« scratchãƒãƒƒãƒ•ã‚¡ã‹ã‚‰é–‹å§‹ã«ãªã‚‹

#+BEGIN_SRC emacs-lisp :results none
  (setq inhibit-startup-message t)
#+END_SRC

** ã‚¿ãƒ–ã§ã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ

ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚’ã‚¿ãƒ–æ–‡å­—ã‹ã‚‰ã‚¹ãƒšãƒ¼ã‚¹ã«å¤‰æ›´

#+BEGIN_SRC emacs-lisp :results none
  (setq indent-tabs-mode nil)
#+END_SRC

** ãƒ“ãƒ¼ãƒ—éŸ³

ãƒ“ãƒ¼ãƒ—éŸ³ã‚’æ¶ˆã™

#+BEGIN_SRC emacs-lisp :results none
  (setq ring-bell-function 'ignore)
#+END_SRC

** ãƒ•ã‚©ãƒ³ãƒˆ

Cicaãƒ•ã‚©ãƒ³ãƒˆã‚’åˆ©ç”¨ã™ã‚‹

#+BEGIN_SRC emacs-lisp :results none
  ;; Cicaãƒ•ã‚©ãƒ³ãƒˆã®è¨­å®š
  (set-face-attribute 'default nil
                      :family "Cica"
                      :height 180)

  ;; æ—¥æœ¬èªæ–‡å­—ã«ã‚‚Cicaãƒ•ã‚©ãƒ³ãƒˆã‚’ä½¿ç”¨
  (set-fontset-font t 'japanese-jisx0208 (font-spec :family "Cica"))
  (set-fontset-font t 'japanese-jisx0212 (font-spec :family "Cica"))
  (set-fontset-font t 'katakana-jisx0201 (font-spec :family "Cica"))

  ;; çµµæ–‡å­—ç­‰ã®ãŸã‚ã«ã‚·ãƒ³ãƒœãƒ«ãƒ•ã‚©ãƒ³ãƒˆã‚‚æŒ‡å®šã™ã‚‹
  (set-fontset-font t 'symbol (font-spec :family "Cica"))
#+END_SRC

** ã‚«ãƒ¼ã‚½ãƒ«

ã‚«ãƒ¼ã‚½ãƒ«ã®ç‚¹æ»…ã‚’ç„¡åŠ¹ã«ã™ã‚‹

#+BEGIN_SRC emacs-lisp :results none
  (blink-cursor-mode 0)
#+END_SRC

** è‡ªå‹•ç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«

ä½œã‚‰ãªã„ã‚ˆã†ã«ã—ãŸã„

#+BEGIN_SRC emacs-lisp :results none
  (setq make-backup-files nil)
  (setq auto-save-list-file-prefix nil)
  (setq create-lockfiles nil)
  (setq auto-save-default nil)
#+END_SRC

* Keymap
** ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã‹ã‚‰è¡Œé ­ã¾ã§å‰Šé™¤ã™ã‚‹

~C-u~ ã§ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã‹ã‚‰è¡Œé ­ã¾ã§å‰Šé™¤ã™ã‚‹\\
ã‚«ãƒ¼ã‚½ãƒ«ãŒå…ˆé ­ã«ã‚ã‚‹ã¨ãã¯ã€æ”¹è¡Œã‚’å‰Šé™¤ã™ã‚‹

#+BEGIN_SRC emacs-lisp :results none
  (defun my/delete-to-beginning-of-line ()
    (interactive)
    (if (bolp)  ; bolp ã¯ point ãŒè¡Œã®å…ˆé ­ã«ã‚ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹
        (if (not (bobp))  ; bobp ã¯ point ãŒãƒãƒƒãƒ•ã‚¡ã®å…ˆé ­ã«ã‚ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹
            (delete-char -1))  ; ãƒãƒƒãƒ•ã‚¡ã®å…ˆé ­ã§ãªã‘ã‚Œã°ã€å‰ã®è¡Œã®æ”¹è¡Œã‚’å‰Šé™¤ã™ã‚‹
      (kill-region (line-beginning-position) (point))))  ; ãã†ã§ãªã‘ã‚Œã°ã€è¡Œã®å…ˆé ­ã‹ã‚‰ç¾åœ¨ä½ç½®ã¾ã§ã‚’å‰Šé™¤ã™ã‚‹

  (global-set-key (kbd "C-u") 'my/delete-to-beginning-of-line)
#+END_SRC

** C-j, C-xã®ã‚¹ãƒ¯ãƒƒãƒ—

xã¯ä½•åº¦ã‚‚æŠ¼ã—ã¦ã‚‹ã¨è²§å¼±ãªè–¬æŒ‡ãŒç—›ããªã‚‹ã®ã§å…¥ã‚Œæ›¿ãˆã‚‹

#+BEGIN_SRC emacs-lisp :results none
  (define-key key-translation-map (kbd "C-j") (kbd "C-x"))
  (define-key key-translation-map (kbd "C-x") (kbd "C-j"))
#+END_SRC

** scratchãƒãƒƒãƒ•ã‚¡ã§ã¯ã€C-<Enter>ã§Emacs lispã‚’å®Ÿè¡Œ

scratchãƒãƒƒãƒ•ã‚¡ã¨ã„ã†ã‹ã€lisp-interaction-modeã§æœ‰åŠ¹åŒ–ã™ã‚‹

#+BEGIN_SRC emacs-lisp :results none
  (defun my-lisp-interaction-mode-hook ()
    (local-set-key (kbd "C-<return>") 'eval-print-last-sexp))
  (add-hook 'lisp-interaction-mode-hook 'my-lisp-interaction-mode-hook)
#+END_SRC

** s-jã«M-xã®å‰²å½“

xã¯ä½•åº¦ã‚‚æŠ¼ã—ã¦ã‚‹ã¨è²§å¼±ãªè–¬æŒ‡ãŒç—›ããªã‚‹ã®ã§s-jã«åŒã˜å½¹å‰²ã‚’ã‚‚ãŸã›ã‚‹

#+BEGIN_SRC emacs-lisp :results none
  (define-key key-translation-map (kbd "s-j") (kbd "M-x"))
#+END_SRC

** s-kã«*ã®å‰²å½“

org-modeã§*ã‚’é€£æ‰“ã—ã¦ã‚‹ã¨Shiftã‚­ãƒ¼ã®ã›ã„ã§å·¦æ‰‹ã®å°æŒ‡ãŒç—›ããªã‚‹ã®ã§

#+BEGIN_SRC emacs-lisp :results none
  (defun insert-asterisk ()
    "Insert an asterisk at the cursor position."
    (interactive)
    (insert "*"))

  (global-set-key (kbd "s-k") 'insert-asterisk)
#+END_SRC

* Package
** use-package: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†

#+BEGIN_SRC emacs-lisp :results none
  (eval-and-compile
    (customize-set-variable
     'package-archives '(("org" . "https://orgmode.org/elpa/")
                         ("melpa" . "https://melpa.org/packages/")
                         ("gnu" . "https://elpa.gnu.org/packages/")))
    (package-initialize)
    (unless (package-installed-p 'use-package)
      (package-refresh-contents)
      (package-install 'use-package)))
#+END_SRC

** Theme: ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒ

#+BEGIN_SRC emacs-lisp :results none
  (use-package doom-themes
    :ensure t
    :config
    ;; Global settings (defaults)
    (setq doom-themes-enable-bold t    ; if nil, bold is universally disabled
          doom-themes-enable-italic t) ; if nil, italics is universally disabled
    (load-theme 'doom-acario-light t)

    ;; Enable flashing mode-line on errors
    (doom-themes-visual-bell-config)
    ;; Enable custom neotree theme (all-the-icons must be installed!)
    (doom-themes-neotree-config)
    ;; or for treemacs users
    (setq doom-themes-treemacs-theme "doom-acario-light") ; use "doom-colors" for less minimal icon theme
    (doom-themes-treemacs-config)
    ;; Corrects (and improves) org-mode's native fontification.
    (doom-themes-org-config))
#+END_SRC

** whitch-key: ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã®ãƒ˜ãƒ«ãƒ—

ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã®ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤ºã—ã¦ãã‚Œã‚‹

#+BEGIN_SRC emacs-lisp :results none
  (use-package which-key
    :ensure t
    :custom ((which-key-idle-delay 1.0))
    :config
    (which-key-mode 1))
#+END_SRC

** è£œå®Œ: corfu, cape
*** corfu

è£œå®Œç”¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

[[https://github.com/minad/corfu][GitHub - minad/corfu: :desert_island: corfu.el - COmpletion in Region FUnction]]

#+BEGIN_SRC emacs-lisp :results none
  (use-package corfu
    :ensure t
    :custom
    ((corfu-auto t)
     (corfu-auto-delay 0.1)
     (corfu-cycle t)
     (corfu-auto-prefix 2) ;; è£œå®Œå€™è£œã‚’2æ–‡å­—ã§å‡ºã™
     (corfu-on-exact-match nil))
    :config
    ;; åŸºæœ¬è¨­å®š
    (global-corfu-mode 1)

    ;; indentãƒ¢ãƒ¼ãƒ‰ã§ã®è£œå®Œã‚’å¼·åŒ–
    (with-eval-after-load 'indent
      (setq tab-always-indent 'complete)))
#+END_SRC

*** cape

corfuå‘ã‘ã«è£œå®Œå€™è£œã‚’æä¾›ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

- cape-abbrevï¼šå®Œå…¨ãªçœç•¥å½¢ï¼ˆadd-global-abbrevã€add-mode-abbrevï¼‰ã€‚
- cape-dabbrev: ç¾åœ¨ã®ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰ã®å®Œå…¨ãªãƒ¯ãƒ¼ãƒ‰ã€‚dabbrev-capfEmacs 29ã‚‚å‚ç…§ã—ã¦ãã ã•ã„ã€‚
- cape-dict: è¾æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã®å®Œå…¨ãªå˜èªã€‚
- cape-elisp-block: Org ã¾ãŸã¯ Markdown ã‚³ãƒ¼ãƒ‰ ãƒ–ãƒ­ãƒƒã‚¯ã§ Elisp ã‚’å®Œæˆã•ã›ã¾ã™ã€‚
- cape-elisp-symbol: å®Œå…¨ãª Elisp ã‚·ãƒ³ãƒœãƒ«ã€‚
- cape-emoji: çµµæ–‡å­—ã‚’å®Œæˆã•ã›ã¾ã™ã€‚ Emacs 29 ä»¥é™ã§åˆ©ç”¨å¯èƒ½ã§ã™ã€‚
- cape-file: å®Œå…¨ãªãƒ•ã‚¡ã‚¤ãƒ«åã€‚
- cape-history: Eshellã€Comintã€ã¾ãŸã¯ãƒŸãƒ‹ãƒãƒƒãƒ•ã‚¡ãƒ¼ã®å±¥æ­´ã‹ã‚‰å®Œäº†ã—ã¾ã™ã€‚
- cape-keyword: å®Œå…¨ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã€‚
- cape-line: ç¾åœ¨ã®ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰è¡Œå…¨ä½“ã‚’å®Œæˆã•ã›ã¾ã™ã€‚
- cape-rfc1345: RFC 1345 ãƒ‹ãƒ¼ãƒ¢ãƒ‹ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ãŸå®Œå…¨ãª Unicode æ–‡å­—ã€‚
- cape-sgml: SGML ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‹ã‚‰ã®å®Œå…¨ãª Unicode æ–‡å­— (ä¾‹: ) &alphaã€‚
- cape-tex: TeX ã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰ã®å®Œå…¨ãª Unicode æ–‡å­—ã€‚ä¾‹\hbar:

#+BEGIN_SRC emacs-lisp :results none
  (use-package cape
    :ensure t
    :init
    (add-to-list 'completion-at-point-functions #'cape-dabbrev)
    (add-to-list 'completion-at-point-functions #'cape-file)
    (add-to-list 'completion-at-point-functions #'cape-elisp-block)
    (add-to-list 'completion-at-point-functions #'cape-history)
    (add-to-list 'completion-at-point-functions #'cape-keyword)
    :config
    )
#+END_SRC

** ãƒŸãƒ‹ãƒãƒƒãƒ•ã‚¡: vertico, consult, orderless, marginalia, recentf

å‚è€ƒ: [[https://joppot.info/posts/2d8a8c1d-6d7f-4cf8-a51a-0f7e5c7e3c80][helmã‹ã‚‰ãƒ¢ãƒ€ãƒ³ãªvertico + consult + recentf + orderless + marginaliaã«ç§»è¡Œã—ã¦ã¿ãŸ]]

*** vertico

M-xã¨ã‹ã€C-j C-fã§ã®ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢ã¨ã‹ãƒŸãƒ‹ãƒãƒƒãƒ•ã‚¡ã§ã®æ“ä½œãŒVimã®Uniteã¨ã‹Telescopeã¿ãŸã„ã«ãªã‚‹
[[https://github.com/minad/vertico][GitHub - minad/vertico: :dizzy: vertico.el - VERTical Interactive COmpletion]]

#+BEGIN_SRC emacs-lisp :results none
  (use-package vertico
    :ensure t
    :custom
    (vertico-count 15) ; å€™è£œæ•°ã‚’15ã«å¢—ã‚„ã™
    :init
    (vertico-mode))
#+END_SRC

*** orderless

verticoãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ã€ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã§fuzzyã«çµã‚Šè¾¼ã¿ã§ããªã„ã®ã§ã€ãã‚Œã‚’å¯èƒ½ã«ã™ã‚‹ãŸã‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

#+BEGIN_SRC emacs-lisp :results none
  (use-package orderless
    :ensure t
    :init
    ;; Set completion style for Emacs
    (setq completion-styles '(orderless)
          completion-category-defaults nil
          completion-category-overrides '((file (styles . (partial-completion))))))
#+END_SRC

*** marginalia

consultã§ä¸€è¦§è¡¨ç¤ºã—ãŸæ™‚ã«ã€ã‚³ãƒãƒ³ãƒ‰ã®èª¬æ˜æ–‡ã¨ã‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹

#+BEGIN_SRC emacs-lisp :results none
  (use-package marginalia
    :ensure t
    :init
    (marginalia-mode)
    :bind (:map minibuffer-local-map
                ("M-A" . marginalia-cycle)))
#+END_SRC

*** recentf

é–‹ã„ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®å±¥æ­´ã‚’ä¿æŒã™ã‚‹

#+BEGIN_SRC emacs-lisp :results none
  (use-package recentf
    :config
    (setq recentf-max-saved-items 15             ; consult-bufferã«è¡¨ç¤ºã™ã‚‹æœ€è¿‘ä½¿ã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€å¤§è¡¨ç¤ºæ•°
          recentf-exclude '(".recentf" "^/ssh:") ; recentfã®å±¥æ­´ã«å«ã¾ã›ãªã„ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆ
          recentf-auto-cleanup 'never)           ; recentfã®å±¥æ­´ã‚’å‰Šé™¤ã—ãªã„

    (defun my/silent-recentf-save-list ()
      "Save the recent list without any messages."
      (interactive)
      (let ((inhibit-message t))
        (recentf-save-list)))

    (setq recentf-auto-save-timer
          (run-with-idle-timer 30 t 'my/silent-recentf-save-list)) ; ãƒãƒƒãƒ•ã‚¡ã‚’é–‹ã„ã¦30ç§’ä»¥ä¸Šã—ãŸã‚‰å±¥æ­´ã«ç™»éŒ²
    (recentf-mode 1))
#+END_SRC

*** Consult

æ¤œç´¢ã€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ç­‰ã„ã‚ã‚“ãªæ˜¨æ—¥ã‚’è¿½åŠ ã—ã¦ãã‚Œã‚‹
Consult-bufferãŒä¾¿åˆ©ã§ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã“ã¨ã§ã€æœ€è¿‘é–‹ã„ãŸãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€åº¦ã«è¡¨ç¤ºã§ãã‚‹ã®ã§ã€ãã‚Œã‚’verticoã§çµã‚Šè¾¼ã‚“ã§ç§»å‹•å‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã‚‹

#+BEGIN_SRC emacs-lisp :results none
  (use-package consult
    :ensure t
    :bind (("C-x b" . consult-buffer)
           ("M-g M-g" . consult-goto-line)  ;; goto-lineã‚’consult-goto-lineã«ç½®ãæ›ãˆ
           ("C-c s" . consult-line)         ;; ãƒãƒƒãƒ•ã‚¡å†…ã‚’ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢
           ("C-c o" . consult-outline)))    ;; ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³
#+END_SRC

** Evil: Vim likeã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰

- Vim likeã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰
  - Meowã‚‚è©¦ã—ãŸã‘ã©ãƒ†ã‚­ã‚¹ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒä½¿ãˆãªã‹ã£ãŸã‚Šã§åˆã‚ãªã‹ã£ãŸ
  - Evilã®ã»ã†ãŒVimã«å¯„ã›ã‚ˆã†ã¨ã—ã¦ã„ã‚‹æ„Ÿã˜ãŒå¼·ã„
    - ãƒ†ã‚­ã‚¹ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚‚ä½¿ãˆã‚‹
  - org-modeã§ã†ã€œã‚“ã£ã¦ãªã£ãŸéƒ¨åˆ†ã¯evil-orgã‚’å…¥ã‚Œã¦ã‹ãªã‚Šæ”¹å–„ã—ãŸ

*** Evil

- ã“ã ã‚ã‚Šãƒã‚¤ãƒ³ãƒˆãƒ¡ãƒ¢
  - Escã§ã®Emacsã‚¹ãƒ†ãƒ¼ãƒˆã‹ã‚‰ã®è„±å‡º
    - Vimã«è¿‘ã„æ„Ÿè¦šã§ã€ã¨ã‚Šã‚ãˆãšEscæŠ¼ã›ã°OKã‚’å®Ÿç¾ã§ãã‚‹
  - Super-oã§ã®ãƒˆã‚°ãƒ«
    - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®C-zã¯å°æŒ‡ãŒå£Šã‚Œã‚‹ã‹ã¨æ€ã£ãŸ
    - ãƒãƒ¼ãƒãƒ«ãƒ¢ãƒ¼ãƒ‰ã§mæŠ¼ã—ã¦Emacsã‚¹ãƒ†ãƒ¼ãƒˆã¨ã‹ã‚‚è¨­å®šã—ã¦ãŸã‘ã©ã€ã©ã“ã‹ã‚‰ã§ã‚‚ãƒˆã‚°ãƒ«å‡ºæ¥ã‚‹ã£ã¦æ„Ÿè¦šã®ã»ã†ãŒè¦šãˆã‚„ã™ã‹ã£ãŸ

#+BEGIN_SRC emacs-lisp :results none
  (use-package evil
    :ensure t
    :init
    (setq evil-want-integration t) ;; This is optional since it's already set to t by default.
    (setq evil-want-keybinding nil)
    :config
    (evil-mode 1)
    ;; ã‚«ãƒ¼ã‚½ãƒ«ã®è‰²ã¨å½¢ã‚’å¤‰æ›´
    (setq evil-normal-state-cursor '(box "#000000"))
    (setq evil-insert-state-cursor '(bar "#000000"))
    (setq evil-default-cursor '(hbar "#000000"))
    ;; å˜èªå¢ƒç•Œè¨­å®š
    ;; _ã‚’å˜èªã®ä¸€éƒ¨ã¨ã—ã¦æ‰±ã†
    (modify-syntax-entry ?_ "w" (standard-syntax-table))
    ;; ?ã‚’å˜èªã®ä¸€éƒ¨ã¨ã—ã¦æ‰±ã†
    (modify-syntax-entry ?? "w" (standard-syntax-table))
    ;; -ã‚’å˜èªã®ä¸€éƒ¨ã¨ã—ã¦æ‰±ã†
    (modify-syntax-entry ?- "w" (standard-syntax-table))
    ;; æ¤œç´¢
    (setq evil-search-module 'evil-search)
    ;; undoã‚·ã‚¹ãƒ†ãƒ ã«undo-treeã‚’ä½¿ã†
    (evil-set-undo-system 'undo-tree)
    ;; ã‚­ãƒ¼ãƒãƒƒãƒ—
    (with-eval-after-load 'evil-maps
      ;; :ã¨;ã‚’ã‚¹ãƒ¯ãƒƒãƒ—
      (define-key evil-motion-state-map ";" 'evil-ex)
      (define-key evil-motion-state-map ":" 'evil-repeat-find-char)

      ;; C-uã§Vimã¨åŒã˜ã‚ˆã†ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« 
      (define-key evil-normal-state-map (kbd "C-u") 'evil-scroll-up)

      ;; ã‚¹ãƒ†ãƒ¼ãƒˆåˆ‡ã‚Šæ›¿ãˆã‚­ãƒ¼ã‚’å¤‰æ›´
      ;; Emacsã‚¹ãƒ†ãƒ¼ãƒˆã‹ã‚‰ESCã§Evilãƒ¢ãƒ¼ãƒ‰ã«å¾©å¸°
      (define-key evil-emacs-state-map (kbd "ESC") 'evil-normal-state)
      ;; ã‚ã‚‰ã‚†ã‚‹ãƒ¢ãƒ¼ãƒ‰ã‹ã‚‰Super-oã§ã‚¹ãƒ†ãƒ¼ãƒˆã‚’ãƒˆã‚°ãƒ«
      (define-key evil-emacs-state-map (kbd "s-o") 'evil-normal-state)
      (define-key evil-normal-state-map (kbd "s-o") 'evil-emacs-state)
      (define-key evil-insert-state-map (kbd "s-o") 'evil-emacs-state)
      (define-key evil-visual-state-map (kbd "s-o") 'evil-emacs-state)

      ;; ã‚¤ãƒ³ã‚µãƒ¼ãƒˆã‚¹ãƒ†ãƒ¼ãƒˆã§ã®ã‚­ãƒ¼ãƒãƒƒãƒ—ã‚’Emacsã«ã¡ã‚‡ã£ã¨å¯„ã›ã‚‹
      ;; nilã‚’å®šç¾©ã™ã‚‹ã¨Emacsãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æŒ™å‹•ã«ãªã‚‹
      (define-key evil-insert-state-map (kbd "TAB") 'nil)
      (define-key evil-insert-state-map (kbd "C-a") 'nil)
      (define-key evil-insert-state-map (kbd "C-e") 'nil)
      (define-key evil-insert-state-map (kbd "C-n") 'nil)
      (define-key evil-insert-state-map (kbd "C-p") 'nil)
      (define-key evil-insert-state-map (kbd "C-f") 'nil)
      (define-key evil-insert-state-map (kbd "C-b") 'nil)
      (define-key evil-insert-state-map (kbd "C-k") 'nil)
      (define-key evil-insert-state-map (kbd "C-r") 'nil)

      ;; Super-â†”ï¸â†•ï¸ã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç§»å‹•
      (with-eval-after-load 'org-agenda
        (global-set-key (kbd "s-<left>") 'evil-window-left)
        (global-set-key (kbd "s-<right>") 'evil-window-right)))
    ;; visualã‚¹ãƒ†ãƒ¼ãƒˆã®*ã§é¸æŠæ–‡å­—åˆ—ã‚’æ¤œç´¢

    (defun my/evil-visual-search-forward ()
      "Search forward for the visually selected text."
      (interactive)
      (let ((selection (buffer-substring-no-properties (region-beginning) (region-end))))
        (deactivate-mark)  ; Optionally deactivate the mark
        (evil-search selection t t)))

    (defun my/evil-visual-search-backward ()
      "Search backward for the visually selected text."
      (interactive)
      (let ((selection (buffer-substring-no-properties (region-beginning) (region-end))))
        (deactivate-mark)  ; Optionally deactivate the mark
        (evil-search selection nil t)))
    (define-key evil-visual-state-map (kbd "*") 'my/evil-visual-search-forward)
    (define-key evil-visual-state-map (kbd "#") 'my/evil-visual-search-backward))
#+END_SRC

*** evil-collection

[[https://github.com/emacs-evil/evil-collection][GitHub - emacs-evil/evil-collection: A set of keybindings for evil-mode]]

#+BEGIN_SRC emacs-lisp :results none
  (use-package evil-collection
    :ensure t
    :after evil
    :config
    (evil-collection-init))
#+END_SRC

*** evil-surround

vim-surroundã¿ãŸã„ãªå‹•ãã‚’å¯èƒ½ã«ã™ã‚‹

#+BEGIN_SRC emacs-lisp :results none
  (use-package evil-surround
    :ensure t
    :config
    (global-evil-surround-mode 1))
#+END_SRC

*** evil-org

å‚è€ƒ: [[https://github.com/Somelauw/evil-org-mode][GitHub - Somelauw/evil-org-mode: Supplemental evil-mode keybindings to emacs org-mode]]

#+BEGIN_SRC emacs-lisp :results none
  (use-package evil-org
    :ensure t
    :after org
    :config
    (add-hook 'org-mode-hook 'evil-org-mode)
    (require 'evil-org-agenda)
    (evil-org-agenda-set-keys))
#+END_SRC

*** evil-multiedit

#+BEGIN_SRC emacs-lisp :results	none
  (use-package evil-multiedit
    :ensure t
    :config
    (evil-multiedit-default-keybinds))
#+END_SRC

** yasnippet: ã‚¹ãƒ‹ãƒšãƒƒãƒˆ

yasnippetãŒå®šç•ªã‚‰ã—ã„\\
ã‚¹ãƒ‹ãƒšãƒƒãƒˆè‡ªä½“ã¯ ~/.emacs.d/snippets/ é…ä¸‹ã§è¨­å®šã™ã‚‹

#+BEGIN_SRC emacs-lisp :results none
  (use-package yasnippet
    :ensure t
    :init
    (yas-global-mode 1)
    :config
    (add-to-list 'yas-snippet-dirs "~/.emacs.d/snippets")
    (yas-reload-all))
#+END_SRC

** projectile: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†

projectile

#+BEGIN_SRC emacs-lisp :results none
  (use-package projectile
    :ensure t
    :config
    (projectile-mode +1)
    ;;(setq projectile-project-search-path '("~/projects"))
    (setq projectile-globally-ignored-files '("*.jpg" "*.png"))
    (define-key projectile-mode-map (kbd "C-c p") 'projectile-command-map))
#+END_SRC

** org-mode
*** org-mode åŸºæœ¬è¨­å®š

#+BEGIN_SRC emacs-lisp :results none
  (use-package org
    :custom
    (org-directory "~/Dropbox/org/")
    (org-use-speed-commands t)
    (org-log-done 'time)
    (org-md-export-with-toc nil)
    :config
    ;; org-agendaã®ãƒ•ã‚¡ã‚¤ãƒ«
    (defvar my/org-agenda-files `(,(concat org-directory "")
                                  ,(concat org-directory "/project")
                                  ,(concat org-directory "/fleeting")))

    (setq org-agenda-files my/org-agenda-files)
    (defun my/update-org-agenda-files ()
      (interactive)
      (setq org-agenda-files my/org-agenda-files))

    ;; org-archiveã®è¨­å®š
    (setq org-archive-location (concat (file-name-as-directory org-directory) "archive/%s_archive::"))

    ;; org-agendaã®è¨­å®š
    (defun my-skip-repeat-org ()
      "Skip entries from the repeat.org file located in org-directory."
      (let ((repeat-org-file (expand-file-name "repeat.org" org-directory)))
        (save-excursion
          (let ((subtree-end (save-excursion (org-end-of-subtree t))))
            (if (string= (buffer-file-name) repeat-org-file)
                subtree-end
              nil)))))

    (setq org-agenda-custom-commands
          '(("o" "Overview of today and TODOs"
             ((agenda "" ((org-agenda-span 'day)))
              (todo "TODO"
                    ((org-agenda-overriding-header "Unfinished TODOs:")
                     (org-agenda-skip-function 'my-skip-repeat-org)))))))

    :bind
    ("C-c c" . org-capture)
    ("C-c a" . org-agenda)
    ("C-c l" . org-store-link)
    ("C-c g" . org-id-get-create))
#+END_SRC

*** org-id

#+BEGIN_SRC emacs-lisp :results	none
  (use-package org-id
    :after org  ; org-modeãŒãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸå¾Œã«èª­ã¿è¾¼ã‚€
    :config
    (setq org-id-link-to-org-use-id t)  ; org-idã‚’åˆ©ç”¨ã—ã¦ãƒªãƒ³ã‚¯ã‚’ç”Ÿæˆã™ã‚‹è¨­å®š
    (setq org-id-locations-file (expand-file-name ".org-id-locations" org-directory)))  ; IDã®ä½ç½®æƒ…å ±ãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®š
#+END_SRC

*** org-capture

#+BEGIN_SRC emacs-lisp :results	none
  ;; org-captureã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
  (use-package org-capture
    :config
    (setq org-capture-templates `(
                                  ;; ã‚ˆãä½¿ã†ã‚‚ã®ã«çµµæ–‡å­—ã¤ã‘ã¨ã
                                  ("t" "â˜‘Todo" entry (file+headline ,(concat org-directory "todo.org") "Todo")
                                   "* TODO %?\n SCHEDULED: %t\n")
                                  ("m" "ğŸ“Memo" entry (file+headline ,(concat org-directory "memo.org") "Memo")
                                   "* %?\n")

                                  ("n" "Memo with Link" entry (file+headline ,(concat org-directory "memo.org") "Memo")
                                   "* %?\nEntered on %U\n  %i\n  %a")
                                  ("u" "Todo with Link" entry (file+headline ,(concat org-directory "todo.org") "Todo")
                                   "* TODO %?\n  %i\n  %a")
                                  )))
#+END_SRC

*** org-roam: roam-research like

#+BEGIN_SRC emacs-lisp :results none
  (use-package org-roam
    :ensure t
    :custom ((org-roam-directory org-directory))
    :bind (("C-c n n" . org-roam-capture)
           ("C-c n f" . org-roam-node-find)
           ("C-c n i" . org-roam-node-insert)
           )
    :config
    (org-roam-setup)
    ;; ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®è¨­å®š
    (setq org-roam-capture-templates
          '(("f" "Fleeting(ä¸€æ™‚ãƒ¡ãƒ¢)" plain "%?"
             :target (file+head "fleeting/%<%Y%m%d%H%M%S>-${slug}.org" "#+TITLE: ${title}\n#+filetags: :fleeting-note:\n")
             :unnarrowed t)
            ("l" "Literature(æ–‡çŒ®)" plain "%?"
             :target (file+head "literature/%<%Y%m%d%H%M%S>-${slug}.org" "#+TITLE: ${title}\n#+filetags: :literature-note:\n")
             :unnarrowed t)
            ("p" "Permanent(è¨˜äº‹)" plain "%?"
             :target (file+head "permanent/%<%Y%m%d%H%M%S>-${slug}.org" "#+TITLE: ${title}\n#+filetags: :permanent-note:\n")
             :unnarrowed t)
            ("b" "Publish(ãƒ–ãƒ­ã‚°ãƒ»Zennãƒ»Qiitaãªã©)" plain "%?"
             :target (file+head "publish/${slug}.org" "#+TITLE: ${title}\n#+filetags: :publish-note:\n")
             :unnarrowed t)))
    )

#+END_SRC

*** consult-org-roam

#+BEGIN_SRC emacs-lisp :results	none
  (use-package consult-org-roam
    :ensure t
    :after org-roam
    :init
    (require 'consult-org-roam)
    ;; Activate the minor mode
    (consult-org-roam-mode 1)
    :custom
    ;; Use `ripgrep' for searching with `consult-org-roam-search'
    (consult-org-roam-grep-func #'consult-ripgrep)
    ;; Configure a custom narrow key for `consult-buffer'
    (consult-org-roam-buffer-narrow-key ?r)
    ;; Display org-roam buffers right after non-org-roam buffers
    ;; in consult-buffer (and not down at the bottom)
    (consult-org-roam-buffer-after-buffers t)
    :config
    ;; Eventually suppress previewing for certain functions
    (consult-customize
     consult-org-roam-forward-links
     :preview-key "M-.")
    :bind
    ;; Define some convenient keybindings as an addition
    ("C-c n e" . consult-org-roam-file-find)
    ("C-c n b" . consult-org-roam-backlinks)
    ("C-c n B" . consult-org-roam-backlinks-recursive)
    ("C-c n l" . consult-org-roam-forward-links)
    ("C-c n r" . consult-org-roam-search))
#+END_SRC

*** org-modern: org-modeã‚’ãŠã—ã‚ƒã‚Œã«è¡¨ç¤º

#+BEGIN_SRC emacs-lisp :results none
  (use-package org-modern
    :ensure t)
#+END_SRC

*** org-web-tools 

[[https://github.com/alphapapa/org-web-tools][GitHub - alphapapa/org-web-tools: View, capture, and archive Web pages in Org-mode]]

#+BEGIN_SRC emacs-lisp :results	none
  (use-package org-web-tools
    :ensure t ; org-web-tools ã‚’è‡ªå‹•çš„ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    :after org
    :config
    (global-set-key (kbd "C-c i l") 'org-web-tools-insert-link-for-url))
#+END_SRC

*** org-preview-html: orgãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

#+BEGIN_SRC emacs-lisp :results none
  (use-package org-preview-html
    :ensure t)
#+END_SRC

*** ox-gfm: GitHub Flavored Markdownã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

GitHub Flavored Markdownã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

#+BEGIN_SRC emacs-lisp :results none
  (use-package ox-gfm
    :ensure t
    :after org)
#+END_SRC

** dired: ãƒ•ã‚¡ã‚¤ãƒ©
*** dired-toggle

ç”»é¢å·¦ã«diredã‚’é–‹ãã‚³ãƒãƒ³ãƒ‰

#+BEGIN_SRC emacs-lisp :results none
  (use-package dired-toggle
    :ensure t
    :bind (("C-x -" . dired-toggle))
    :config
    )
#+END_SRC

** autorevert: Emacsã®å¤–éƒ¨ã§ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ›´æ–°ã•ã‚ŒãŸã‚‰è‡ªå‹•èª­ã¿è¾¼ã¿

#+BEGIN_SRC emacs-lisp :results none
  (use-package autorevert
    :ensure t
    :config
    (setq auto-revert-interval 1) ; ãƒã‚§ãƒƒã‚¯é–“éš”ã‚’1ç§’ã«è¨­å®š
    (global-auto-revert-mode 1))  ; å…¨ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒƒãƒ•ã‚¡ã«å¯¾ã—ã¦è‡ªå‹•ãƒªãƒãƒ¼ãƒˆã‚’æœ‰åŠ¹ã«ã™ã‚‹
#+END_SRC

** dracro: ãƒŸãƒ‹ãƒã‚¯ãƒ­
#+BEGIN_SRC emacs-lisp :results none
  (use-package dmacro
    :ensure t
    :custom `((dmacro-key . ,(kbd "C-S-e")))
    :config
    (global-dmacro-mode))
#+END_SRC

** elscreen: ç”»é¢ç®¡ç†

#+BEGIN_SRC emacs-lisp :results none
  (use-package elscreen
    :ensure t
    :init
    (elscreen-start)
    :config
    ;; Define 's-e' as a prefix command
    (define-prefix-command 's-e-prefix)
    (global-set-key (kbd "s-e") 's-e-prefix)

    ;; Adjusting the previous configuration to use 's-e' prefix
    (define-key s-e-prefix (kbd "c") 'elscreen-create)
    (define-key s-e-prefix (kbd "n") 'elscreen-next)
    (define-key s-e-prefix (kbd "p") 'elscreen-previous)
    (global-set-key (kbd "C-<tab>") 'elscreen-next)
    (global-set-key (kbd "C-S-<tab>") 'elscreen-previous)
    (define-key s-e-prefix (kbd "k") 'elscreen-kill)
    (define-key s-e-prefix (kbd ",") 'elscreen-screen-nickname)
    (define-key s-e-prefix (kbd "0") 'elscreen-goto-0)
    (define-key s-e-prefix (kbd "1") 'elscreen-goto-1)
    (define-key s-e-prefix (kbd "2") 'elscreen-goto-2)
    (define-key s-e-prefix (kbd "3") 'elscreen-goto-3)
    (define-key s-e-prefix (kbd "4") 'elscreen-goto-4)
    (define-key s-e-prefix (kbd "5") 'elscreen-goto-5)
    (define-key s-e-prefix (kbd "6") 'elscreen-goto-6)
    (define-key s-e-prefix (kbd "7") 'elscreen-goto-7)
    (define-key s-e-prefix (kbd "8") 'elscreen-goto-8)
    (define-key s-e-prefix (kbd "9") 'elscreen-goto-9))
#+END_SRC

** migemo: ãƒ­ãƒ¼ãƒå­—å…¥åŠ›ã®ã¾ã¾ã§æ—¥æœ¬èªã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«æ¤œç´¢

cmigemoã¯homebrewã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ããŸã€‚\\
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚³ãƒãƒ³ãƒ‰ã¯ä¸‹è¨˜

#+BEGIN_SRC bash
  # brew install cmigemo
#+END_SRC

#+BEGIN_SRC emacs-lisp :results none
  (use-package migemo
    :ensure t
    :config
    (setq migemo-command "cmigemo")
    (setq migemo-options '("-q" "--emacs"))
    (setq migemo-dictionary "/opt/homebrew/share/migemo/utf-8/migemo-dict")
    (setq migemo-user-dictionary nil)
    (setq migemo-regex-dictionary nil)
    (setq migemo-coding-system 'utf-8-unix)
    (migemo-init))
#+END_SRC

** gptel: AI Chat

#+BEGIN_SRC emacs-lisp :results	none
  (use-package gptel
    :ensure t
    :config
    (setq gptel-api-key
          (auth-source-pick-first-password
           :host "api.openai.com"))
    (setq gptel-model "gpt-4")
    (setq gptel-default-mode 'org-mode))
#+END_SRC

** undo-tree

undoã®å±¥æ­´ã‚’treeã§è¡¨ç¤ºã§ãã‚‹ã€‚Emacsã®undoãŒã‚ˆãåˆ†ã‹ã‚‰ãªã‹ã£ãŸã®ã§ä¾¿åˆ©

#+BEGIN_SRC emacs-lisp :results	none
  (use-package undo-tree
    :ensure t
    :init
    (global-undo-tree-mode)
    :config
    (setq undo-tree-history-directory-alist '(("." . "~/.emacs.d/undo")))
    (setq undo-tree-auto-save-history t)
    :bind (("C-x u" . undo-tree-visualize))
    )
#+END_SRC
* Function
** ãŠæ°—ã«å…¥ã‚Šã®ã‚³ãƒãƒ³ãƒ‰ã ã‘ä¸€è¦§ã™ã‚‹

- ~my/fav-commands~ ã«å¥½ããªã‚³ãƒãƒ³ãƒ‰ã‚’è¿½åŠ ã™ã‚‹

#+BEGIN_SRC emacs-lisp :results none
  (defvar my/fav-commands
    '(org-id-get-create ; org-roam IDä»˜ä¸
      org-toggle-inline-images ; org-modeã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç”»åƒè¡¨ç¤º
      toggle-truncate-lines
      global-org-modern-mode
      org-preview-html-mode
      ))

  (defun my/execute-fav-command ()
    (interactive)
    (let ((command (completing-read "Command: " my/fav-commands nil t)))
      (call-interactively (intern command))))
  (global-set-key (kbd "s-n") 'my/execute-fav-command)
#+END_SRC

** Evil asterisk æ‹¡å¼µ

#+BEGIN_SRC emacs-lisp :results	none
#+END_SRC

* Footer

#+BEGIN_SRC emacs-lisp :results none
  (provide 'init)

  ;; Local Variables:
  ;; indent-tabs-mode: nil
  ;; End:

  ;;; init.el ends here
#+END_SRC
